# 3_ROS2_BLENDER — ROS 2 + Blender → Gazebo world generation

This repository showcases a practical pipeline that bridges design data and simulation using Python, Blender, and ROS 2/Gazebo:

- Convert structured layout data into Gazebo SDF worlds
- Generate 3D text labels as meshes via Blender (`bpy`)
- Convert OBJ assets to DAE (COLLADA) for Gazebo consumption
- Includes a ready ROS 2 TurtleBot3 workspace scaffold for simulation

The project is designed as a portfolio-quality, reproducible example suitable for GitHub and Upwork demonstration.

### Key components
- `traces_mapping_dict_2_gazebo_obj_v*.py`: Convert layout dictionaries (e.g., Plotly-derived) into Gazebo SDF (`.sdf`). Uses Shapely for geometry operations (walls, paths, etc.).
- `blender_3d_text_generator_v1.py`: Creates per-object 3D text meshes in Blender, exports models, and generates corresponding `model.config`/`*.sdf` entries.
- `convert_obj_to_dae_v1.py`: Batch-convert `.obj` models to `.dae` (COLLADA) with origin recentering for Gazebo.
- `simple_plotly2gazebo_v1.py`: Minimal example producing an SDF world from simple x/y data.
- `text_3d_models/`: Example models generated by the Blender text pipeline (DAE + SDF + model.config).
- `turtlebot3_ws/`: A ROS 2 workspace including TurtleBot3 packages (src present). Build and log artifacts are intentionally ignored via `.gitignore`.

### Repository structure
```
.
├─ text_3d_models/            # Example models for Gazebo (DAE/MTL/SDF/model.config)
├─ turtlebot3_ws/
│  ├─ src/                    # TurtleBot3 packages (upstream)
│  ├─ build/ install/ log/    # Ignored; local build outputs
├─ *.py                       # Conversion and generation scripts
├─ *.sdf                      # Example SDF worlds
├─ Dockerfile                 # ROS 2 + Gazebo base image with convenient env
├─ requirements.txt           # Host Python deps for non-Blender scripts
└─ .github/                   # Issue/PR templates and CI
```

### Requirements
- Python 3.10+
- Blender (for scripts using `bpy`). `bpy` is bundled with Blender and not typically installed via pip.
- Gazebo (or Gazebo Classic) for SDF world visualization
- ROS 2 (Iron or compatible) if running TurtleBot3 simulations
- For geometry processing: `Shapely` (installed via `pip install -r requirements.txt`)

### Quick start

#### 1) Use the Docker image (optional but convenient)
This repo includes a `Dockerfile` that installs ROS 2 Iron, Gazebo, and Python tooling. Build and run it based on your platform and container runtime. Inside the container, source ROS and use Gazebo as needed.

Notes:
- The Docker image is a convenience for simulation. Blender usage (with `bpy`) generally happens on the host where Blender is installed.
- The image sets `GAZEBO_MODEL_PATH` to include `/localros/text_3d_models` for easy model resolution.

#### 2) Install Python dependencies (host)
```
pip install -r requirements.txt
```

#### 3) Generate SDF worlds from layout dictionaries
The scripts `traces_mapping_dict_2_gazebo_obj_v*.py` read a serialized mapping (e.g., `ros_objekti_v*.txt`) and emit an SDF world (e.g., `Livarna_LJ_worldSDF_v2.sdf`). Adjust input/output paths in the script or provide your own data source.

Outputs are standard SDF and can be visualized in Gazebo.

#### 4) Generate 3D text meshes in Blender
The Blender script `blender_3d_text_generator_v1.py` creates per-object 3D text models and emits `model.config`/`*.sdf` for each generated model under a target directory.

Usage patterns:
- Run the script from within Blender's scripting workspace
- Or run Blender in background mode with the script (see Blender CLI docs for your platform)

Adjust the hardcoded input/output paths to match your environment. For portability, consider adapting them to environment variables.

#### 5) Convert OBJ to DAE for Gazebo
Use `convert_obj_to_dae_v1.py` to batch-convert OBJ assets to DAE with recentered origins, which Gazebo expects.

### Important notes about paths
Some scripts in this archive were originally authored with absolute Windows paths (e.g., `C:\Users\...`). Before running, change those paths to suit your environment, or refactor to read from environment variables. This keeps the scripts cross-platform and repo-friendly.

### ROS 2 workspace (TurtleBot3)
`turtlebot3_ws/src` contains upstream TurtleBot3 packages. The `build`, `install`, and `log` directories are excluded via `.gitignore`. If you intend to build locally:
1. Source ROS 2
2. Build with your standard colcon invocation
3. Source the workspace overlay

### Contributing
Please see `CONTRIBUTING.md`. By participating, you agree to the `CODE_OF_CONDUCT.md`.

### License
MIT — see `LICENSE` for details.


